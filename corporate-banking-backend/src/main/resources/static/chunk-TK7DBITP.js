import{c as C,e as b}from"./chunk-TSTDHU5S.js";import{C as q,D as N,G as _,H as A,N as E,O,x as R}from"./chunk-JASLAZAZ.js";import{a as D}from"./chunk-RZE7Z2RZ.js";import{c as P,e as w}from"./chunk-N6BUJSKD.js";import{b as g,d as o,f as v,g as M,j as h,k as x,l as I,m as S,r as y,t as F}from"./chunk-M3L7I6SR.js";import{Nb as r,Oa as u,Xa as m,bb as c,pb as d,qb as t,rb as e,sb as a,yb as p,yc as f}from"./chunk-6NNWKDWV.js";var G=class s{constructor(i,n,l,j){this.fb=i;this.creditService=n;this.route=l;this.router=j}form;submitting=!1;ngOnInit(){this.form=this.fb.group({clientId:["",o.required],requestAmount:[null,[o.required,o.min(1)]],tenureMonths:[null,[o.required,o.min(1)]],purpose:["",o.required]}),this.route.queryParams.subscribe(i=>{i.clientId&&this.form.patchValue({clientId:i.clientId})})}submit(){if(this.form.invalid){this.form.markAllAsTouched();return}this.submitting=!0,this.creditService.createCreditRequest(this.form.value).subscribe({next:()=>{alert("\u2705 Credit request submitted successfully"),this.router.navigate(["/rm/credits"]),this.submitting=!1},error:i=>{console.error(i),alert("\u274C Failed to submit credit request"),this.submitting=!1}})}static \u0275fac=function(n){return new(n||s)(m(y),m(D),m(C),m(b))};static \u0275cmp=c({type:s,selectors:[["app-create-credit"]],decls:25,vars:2,consts:[[1,"credit-card"],[1,"title"],[1,"credit-form",3,"ngSubmit","formGroup"],[1,"form-row"],["appearance","outline"],["matInput","","formControlName","clientId"],["matInput","","type","number","formControlName","requestAmount"],["matInput","","type","number","formControlName","tenureMonths"],["matInput","","rows","3","formControlName","purpose"],[1,"actions"],["mat-raised-button","","color","primary","type","submit",3,"disabled"]],template:function(n,l){n&1&&(t(0,"mat-card",0)(1,"h2",1),r(2,"Create Credit Request"),e(),t(3,"form",2),p("ngSubmit",function(){return l.submit()}),t(4,"div",3)(5,"mat-form-field",4)(6,"mat-label"),r(7,"Client ID"),e(),a(8,"input",5),e(),t(9,"mat-form-field",4)(10,"mat-label"),r(11,"Request Amount"),e(),a(12,"input",6),e()(),t(13,"div",3)(14,"mat-form-field",4)(15,"mat-label"),r(16,"Tenure (months)"),e(),a(17,"input",7),e(),t(18,"mat-form-field",4)(19,"mat-label"),r(20,"Purpose"),e(),a(21,"textarea",8),e()(),t(22,"div",9)(23,"button",10),r(24," Submit Credit Request "),e()()()()),n&2&&(u(3),d("formGroup",l.form),u(20),d("disabled",l.submitting))},dependencies:[f,F,h,g,x,v,M,S,I,w,P,N,q,R,A,_,O,E],styles:[".credit-card[_ngcontent-%COMP%]{max-width:900px;margin:40px auto;padding:30px;border-radius:12px}.title[_ngcontent-%COMP%]{margin-bottom:24px;font-weight:600}.credit-form[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:24px}.form-row[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr;gap:20px}mat-form-field[_ngcontent-%COMP%]{width:100%}.actions[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;margin-top:10px}input[readonly][_ngcontent-%COMP%]{background-color:#f5f5f5;cursor:not-allowed}"]})};export{G as CreateCreditComponent};
